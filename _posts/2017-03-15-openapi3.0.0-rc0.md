---
layout: post
title: Five things they didn't tell you were changing in OpenAPI 3.0.0-RC0 
tagline: Diving deeper into the next version of the OpenAPI (Swagger) spec
category: openapi
tags:
  - openapi
  - swagger
  - openapi3
  - api
published: true

---
Articles like [this one](https://dzone.com/articles/what-you-need-to-know-about-oas-30) are 
excellent at setting out the major changes in the OpenAPI 3.0.0-RC0 implementor's draft.

You can tell how excellent it is by how many times it's been copied and reposted, often without
checking for errors such as "`dataForm` parameters" (it should of course be `formData`).

However, there are some surprises in store once you start digging further into the specification.

Even Marsh Gardiner's excellent [talk](https://youtu.be/4lBMQteMd6Y) doesn't touch on all of
these points.

Here are five changes which may otherwise have passed you by...

# Parameters don't have types any more

You read that right. We all know `body` and `file` parameters have gone, but more surprising is
that the `type` property on an OpenAPI `parameter` has been removed, along with all of the
following:

```javascript
	'format',
	'minimum',
	'maximum',
	'exclusiveMinimum',
	'exclusiveMaximum',
	'minLength',
	'maxLength',
	'multipleOf',
	'minItems',
	'maxItems',
	'uniqueItems',
	'additionalProperties',
	'pattern',
	'enum',
	'default'
```

Parameters are now by default **untyped**. They function as strings unless otherwise specified.

To do this, you now need to declare a `schema` property to constrain a parameter to even a
primitive type.

Sounds like a bit of extra work? It is, but it gives the OpenAPI 3 specification more 
flexibility and consistency. Anything you can describe with a JSON schema can now be your
type. Examples, defaults, formatting, `array` properties, all work exactly as you would
define them in the schema of a `requestBody` or `response`. It's a big change, but one that I'm sure
we'll all get used to quickly.

# Headers don't have types any more

Ok, this is a bit of a cheat. As I said above, the OpenAPI 3 specification aims for 
consistency, and that's what we have here. To constrain a header to a type other than an
unformatted string, simply declare or reuse a `schema`.

# oAuth2 authentication now supports multiple flows

You'd be excused for missing this one too, as the `securityScheme` object has a property called
`flow`, not `flows`. This is up for possibly [changing](https://github.com/OAI/OpenAPI-Specification/issues/967) in the specification, post RC0.

# Terms and Conditions must now be a URL

This change fits in with the vast majority of real-world usage in Swagger / OpenAPI 2 definitions
as far as I can see. I've only found one example of someone including the actual text of the terms
in this property.

From my experience however, almost anything parses as a valid URL, so you are likely to get past
any [validators](https://github.com/mermade/swagger2openapi) which show up.

# Rules on reusable component names

The rules have been tightened on what makes a valid name for a reusable component (i.e. 
what your names were under `definitions` in Swagger / OpenAPI 2.0). Now only the characters
A-Z, a-z, ., - and _ are valid.

### Wrapping up

I hope you've found something useful in this post, but please don't hesitate to contact me via
[email](mailto:mike.ralphson@gmail.com) or @permittedSoc on Twitter.
